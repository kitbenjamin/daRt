---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# daRt

<!-- badges: start -->
<!-- badges: end -->
This readme is very work in progress.

The daRt package provides a very quick and flexible way to import data that is produced by the Discrete Anisotropic Radiative Transfer (DART) model. The data in daRt are formatted in a way that facilitates rapid data analysis. 

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("willmorrison1/daRt")
```
## Example

This is a basic work in progress example:

```{r directions example, fig.width = 7, fig.height = 3, dpi = 200}
library(daRt)
library(ggplot2)
#define the simulation directory
simulationDir <- "man/sampleSimulation/cesbio"
#define SimulationFilter object - define "directions" as the product and filter all 
#but the first iteration ("ITER1") and two bands ("BAND1", "BAND2")
sF <- simulationFilter(product = "directions", 
                       iters = "ITER1", 
                       bands = c("BAND1", "BAND2"))
#show contents 
sF
#get simulation files based on the defined filter
simFiles <- daRt::getFiles(x = simulationDir, sF = sF)
#get simulation data
simData <- daRt::getData(x = simulationDir, sF = sF)
#plot using ggplot2
plotOut <- ggplot(simData@data) +
    geom_point(aes(x = zenith, y = value, colour = azimuth)) +
    facet_wrap(~ band)
plot(plotOut)
```
Then alter the SimulationFilter to look at images
```{r images example, fig.width = 8.5, fig.height = 3, dpi = 150}
#instead, look at images
#todo - export "products"
sF@product <- "images"
simData <- daRt::getData(x = simulationDir, sF = sF)
ggplot(simData@data) + 
    geom_raster(aes(x = Var1, y = Var2, fill = value)) +
    facet_grid(band ~ imageNo)
```

